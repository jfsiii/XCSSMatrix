/*! xcssmatrix - v0.0.6 - 2012-10-05
 * https://github.com/jfsiii/XCSSMatrix
 * Copyright (c) 2012 John Schulz
 * Licensed MIT <http://jfsiii.mit-license.org> */
(function(e){var t,n,r;return t=function(e){return function(t,r,i,s){var o,u,a={},f={exports:a},l,c;i=i.split("/"),o=i.pop(),o||(c=!0,o=i.pop());if(o==="."||o==="..")i.push(o),o="";while(u=i.shift())u===".."?t=r.pop():u!=="."&&(r.push(t),t=t[u]);o?(!c&&t[o+".js"]&&(o+=".js"),typeof t[o]=="object"&&(r.push(t),t=t[o],o="index.js")):o="index.js",l=t[o];if(!l)throw new Error("Could not find module '"+s+"'");return t[o]=e(f),l.call(a,a,f,n(t,r)),f.exports}}(function(e){return function(t,n){n.exports=e.exports}}),r=function(n,r,i){var s,o=i,u=i.charAt(0);return u==="/"?(o=o.slice(1),n=e["/"],r=[]):u!=="."&&(s=o.split("/",1)[0],n=e[s],r=[],o=o.slice(s.length+1)||n[":mainpath:"]),t(n,r,o,i)},n=function(e,t){return function(n){return r(e,[].concat(t),n)}},n(e,[])})({XCSSMatrix:{"index.js":function(e,t,n){var r=n("./lib/XCSSMatrix.js");t.exports=r},lib:{"XCSSMatrix.js":function(e,t,n){function i(e){this.m11=this.m22=this.m33=this.m44=1,this.m12=this.m13=this.m14=this.m21=this.m23=this.m24=this.m31=this.m32=this.m34=this.m41=this.m42=this.m43=0,typeof e=="string"&&this.setMatrixValue(e)}function u(e){return String.fromCharCode(e+97)}function a(e){return"m"+(Math.floor(e/4)+1)+(e%4+1)}function l(e){return e.value}function c(e){return f[e]}function h(e){return e.units==="rad"?(e.value=r.angles.rad2deg(e.value),e.units="deg"):e.units==="grad"&&(e.value=r.angles.grad2deg(e.value),e.units="deg"),e}function p(e,t){t.value=t.value.map(h);var n=c(t.key),r=n(e,t);return r||e}function d(e){var t=r.transp.stringToStatements(e);if(t.length===1&&/^matrix/.test(e))return e;var n=r.funcs.onlyFirstArg(r.transp.statementToObject),s=t.map(n),o=new i,u=s.reduce(p,o),a=u.toString();return a}var r={angles:n("./angleUtils"),matrix:n("./matrixUtils"),transp:n("./cssTransformStringUtils"),funcs:{onlyFirstArg:function(e,t){return t=t||this,function(n){return e.call(t,n)}}}};i.displayName="XCSSMatrix";var s=["a","b","c","d","e","f"],o=["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"];[["m11","a"],["m12","b"],["m21","c"],["m22","d"],["m41","e"],["m42","f"]].forEach(function(e){var t=e[0],n=e[1];Object.defineProperty(i.prototype,n,{set:function(e){this[t]=e},get:function(){return this[t]},enumerable:!0,configurable:!0})}),i.prototype.multiply=function(e){if(!e)return null;var t=e,n=this,r=new i;return r.m11=t.m11*n.m11+t.m12*n.m21+t.m13*n.m31+t.m14*n.m41,r.m12=t.m11*n.m12+t.m12*n.m22+t.m13*n.m32+t.m14*n.m42,r.m13=t.m11*n.m13+t.m12*n.m23+t.m13*n.m33+t.m14*n.m43,r.m14=t.m11*n.m14+t.m12*n.m24+t.m13*n.m34+t.m14*n.m44,r.m21=t.m21*n.m11+t.m22*n.m21+t.m23*n.m31+t.m24*n.m41,r.m22=t.m21*n.m12+t.m22*n.m22+t.m23*n.m32+t.m24*n.m42,r.m23=t.m21*n.m13+t.m22*n.m23+t.m23*n.m33+t.m24*n.m43,r.m24=t.m21*n.m14+t.m22*n.m24+t.m23*n.m34+t.m24*n.m44,r.m31=t.m31*n.m11+t.m32*n.m21+t.m33*n.m31+t.m34*n.m41,r.m32=t.m31*n.m12+t.m32*n.m22+t.m33*n.m32+t.m34*n.m42,r.m33=t.m31*n.m13+t.m32*n.m23+t.m33*n.m33+t.m34*n.m43,r.m34=t.m31*n.m14+t.m32*n.m24+t.m33*n.m34+t.m34*n.m44,r.m41=t.m41*n.m11+t.m42*n.m21+t.m43*n.m31+t.m44*n.m41,r.m42=t.m41*n.m12+t.m42*n.m22+t.m43*n.m32+t.m44*n.m42,r.m43=t.m41*n.m13+t.m42*n.m23+t.m43*n.m33+t.m44*n.m43,r.m44=t.m41*n.m14+t.m42*n.m24+t.m43*n.m34+t.m44*n.m44,r},i.prototype.inverse=function(){var e;if(r.matrix.isIdentityOrTranslation(this)){e=new i;if(this.m41!==0||this.m42!==0||this.m43!==0)e.m41=-this.m41,e.m42=-this.m42,e.m43=-this.m43;return e}var t=r.matrix.adjoint(this),n=r.matrix.determinant4x4(this);if(Math.abs(n)<1e-8)return null;for(var s=1;s<5;s++)for(var o=1;o<5;o++)t["m"+s+o]/=n;return t},i.prototype.rotate=function(e,t,n){if(typeof e!="number"||isNaN(e))e=0;(typeof t!="number"||isNaN(t))&&(typeof n!="number"||isNaN(n))&&(n=e,e=0,t=0);if(typeof t!="number"||isNaN(t))t=0;if(typeof n!="number"||isNaN(n))n=0;e=r.angles.deg2rad(e),t=r.angles.deg2rad(t),n=r.angles.deg2rad(n);var s=new i,o=new i,u=new i,a,f,l;n/=2,a=Math.sin(n),f=Math.cos(n),l=a*a,u.m11=u.m22=1-2*l,u.m12=u.m21=2*a*f,u.m21*=-1,t/=2,a=Math.sin(t),f=Math.cos(t),l=a*a,o.m11=o.m33=1-2*l,o.m13=o.m31=2*a*f,o.m13*=-1,e/=2,a=Math.sin(e),f=Math.cos(e),l=a*a,s.m22=s.m33=1-2*l,s.m23=s.m32=2*a*f,s.m32*=-1;var c=new i,h=this.toString()===c.toString(),p=h?u.multiply(o).multiply(s):this.multiply(s).multiply(o).multiply(u);return p},i.prototype.rotateAxisAngle=function(e,t,n,s){if(typeof e!="number"||isNaN(e))e=0;if(typeof t!="number"||isNaN(t))t=0;if(typeof n!="number"||isNaN(n))n=0;if(typeof s!="number"||isNaN(s))s=0;e===0&&t===0&&n===0&&(n=1);var o=new i,u=Math.sqrt(e*e+t*t+n*n),a,f,l,c,h,p,d;return s=(r.angles.deg2rad(s)||0)/2,a=Math.cos(s),f=Math.sin(s),l=f*f,u===0?(e=0,t=0,n=1):u!==1&&(e/=u,t/=u,n/=u),e===1&&t===0&&n===0?(o.m22=o.m33=1-2*l,o.m23=o.m32=2*a*f,o.m32*=-1):e===0&&t===1&&n===0?(o.m11=o.m33=1-2*l,o.m13=o.m31=2*a*f,o.m13*=-1):e===0&&t===0&&n===1?(o.m11=o.m22=1-2*l,o.m12=o.m21=2*a*f,o.m21*=-1):(c=f*a,h=e*e,p=t*t,d=n*n,o.m11=1-2*(p+d)*l,o.m12=2*(e*t*l+n*c),o.m13=2*(e*n*l-t*c),o.m21=2*(t*e*l-n*c),o.m22=1-2*(d+h)*l,o.m23=2*(t*n*l+e*c),o.m31=2*(n*e*l+t*c),o.m32=2*(n*t*l-e*c),o.m33=1-2*(h+p)*l),this.multiply(o)},i.prototype.scale=function(e,t,n){var r=new i;if(typeof e!="number"||isNaN(e))e=1;if(typeof t!="number"||isNaN(t))t=e;if(typeof n!="number"||isNaN(n))n=1;return r.m11=e,r.m22=t,r.m33=n,this.multiply(r)},i.prototype.skewX=function(e){var t=r.angles.deg2rad(e),n=new i;return n.c=Math.tan(t),this.multiply(n)},i.prototype.skewY=function(e){var t=r.angles.deg2rad(e),n=new i;return n.b=Math.tan(t),this.multiply(n)},i.prototype.translate=function(e,t,n){var r=new i;if(typeof e!="number"||isNaN(e))e=0;if(typeof t!="number"||isNaN(t))t=0;if(typeof n!="number"||isNaN(n))n=0;return r.m41=e,r.m42=t,r.m43=n,this.multiply(r)},i.prototype.setMatrixValue=function(e){var t=d(e.trim()),n=r.transp.statementToObject(t);if(!n)return;var i=n.key===r.transp.matrixFn3d,s=i?a:u,o=n.value,f=o.length;if(i&&f!==16||!i&&f!==6)return;o.forEach(function(e,t){var n=s(t);this[n]=e.value},this)},i.prototype.toString=function(){var e,t;return r.matrix.isAffine(this)?(t=r.transp.matrixFn2d,e=s):(t=r.transp.matrixFn3d,e=o),t+"("+e.map(function(e){return this[e].toFixed(6)},this).join(", ")+")"};var f={matrix:function(e,t){var n=new i(t.unparsed);return e.multiply(n)},matrix3d:function(e,t){var n=new i(t.unparsed);return e.multiply(n)},perspective:function(e,t){var n=new i;return n.m34-=1/t.value[0].value,e.multiply(n)},rotate:function(e,t){return e.rotate.apply(e,t.value.map(l))},rotate3d:function(e,t){return e.rotateAxisAngle.apply(e,t.value.map(l))},rotateX:function(e,t){return e.rotate.apply(e,[t.value[0].value,0,0])},rotateY:function(e,t){return e.rotate.apply(e,[0,t.value[0].value,0])},rotateZ:function(e,t){return e.rotate.apply(e,[0,0,t.value[0].value])},scale:function(e,t){return e.scale.apply(e,t.value.map(l))},scale3d:function(e,t){return e.scale.apply(e,t.value.map(l))},scaleX:function(e,t){return e.scale.apply(e,t.value.map(l))},scaleY:function(e,t){return e.scale.apply(e,[0,t.value[0].value,0])},scaleZ:function(e,t){return e.scale.apply(e,[0,0,t.value[0].value])},skew:function(e,t){var n=new i("skewX("+t.value[0].unparsed+")"),r=new i("skewY("+t.value[1].unparsed+")"),s="matrix(1.00000, "+r.b+", "+n.c+", 1.000000, 0.000000, 0.000000)",o=new i(s);return e.multiply(o)},skewX:function(e,t){return e.skewX.apply(e,[t.value[0].value])},skewY:function(e,t){return e.skewY.apply(e,[t.value[0].value])},translate:function(e,t){return e.translate.apply(e,t.value.map(l))},translate3d:function(e,t){return e.translate.apply(e,t.value.map(l))},translateX:function(e,t){return e.translate.apply(e,[t.value[0].value,0,0])},translateY:function(e,t){return e.translate.apply(e,[0,t.value[0].value,0])},translateZ:function(e,t){return e.translate.apply(e,[0,0,t.value[0].value])}};t.exports=i},"angleUtils.js":function(e,t,n){function r(e){return e*Math.PI/180}function i(e){return e*(180/Math.PI)}function s(e){return e/(400/360)}t.exports={deg2rad:r,rad2deg:i,grad2deg:s}},"cssTransformStringUtils.js":function(e,t,n){function i(e){var t=/([\-\+]?[0-9]+[\.0-9]*)(deg|rad|grad|px|%)*/,n=e.match(t)||[];return{value:parseFloat(n[1]),units:n[2],unparsed:e}}function s(e,t){var n=/(\w+)\(([^\)]+)\)/i,r=e.toString().match(n).slice(1),s=r[0],o=r[1].split(/, ?/),u=!t&&o.map(i);return{key:s,value:u||o,unparsed:e}}function o(e){var t=/(\w+)\([^\)]+\)/ig,n=e.match(t)||[];return n}var r={angles:n("./angleUtils")};t.exports={matrixFn2d:"matrix",matrixFn3d:"matrix3d",valueToObject:i,statementToObject:s,stringToStatements:o}},"matrixUtils.js":function(e,t,n){function r(e,t,n,r){return e*r-t*n}function i(e,t,n,i,s,o,u,a,f){return e*r(s,o,a,f)-i*r(t,n,a,f)+u*r(t,n,s,o)}function s(e){var t=e,n=t.m11,r=t.m21,s=t.m31,o=t.m41,u=t.m12,a=t.m22,f=t.m32,l=t.m42,c=t.m13,h=t.m23,p=t.m33,d=t.m43,v=t.m14,m=t.m24,g=t.m34,y=t.m44;return n*i(a,h,m,f,p,g,l,d,y)-r*i(u,c,v,f,p,g,l,d,y)+s*i(u,c,v,a,h,m,l,d,y)-o*i(u,c,v,a,h,m,f,p,g)}function o(e){return e.m13===0&&e.m14===0&&e.m23===0&&e.m24===0&&e.m31===0&&e.m32===0&&e.m33===1&&e.m34===0&&e.m43===0&&e.m44===1}function u(e){var t=e;return t.m11===1&&t.m12===0&&t.m13===0&&t.m14===0&&t.m21===0&&t.m22===1&&t.m23===0&&t.m24===0&&t.m31===0&&t.m31===0&&t.m33===1&&t.m34===0&&t.m44===1}function a(e){var t=e,n=new e.constructor,r=t.m11,s=t.m12,o=t.m13,u=t.m14,a=t.m21,f=t.m22,l=t.m23,c=t.m24,h=t.m31,p=t.m32,d=t.m33,v=t.m34,m=t.m41,g=t.m42,y=t.m43,b=t.m44;return n.m11=i(f,p,g,l,d,y,c,v,b),n.m21=-i(a,h,m,l,d,y,c,v,b),n.m31=i(a,h,m,f,p,g,c,v,b),n.m41=-i(a,h,m,f,p,g,l,d,y),n.m12=-i(s,p,g,o,d,y,u,v,b),n.m22=i(r,h,m,o,d,y,u,v,b),n.m32=-i(r,h,m,s,p,g,u,v,b),n.m42=i(r,h,m,s,p,g,o,d,y),n.m13=i(s,f,g,o,l,y,u,c,b),n.m23=-i(r,a,m,o,l,y,u,c,b),n.m33=i(r,a,m,s,f,g,u,c,b),n.m43=-i(r,a,m,s,f,g,o,l,y),n.m14=-i(s,f,p,o,l,d,u,c,v),n.m24=i(r,a,h,o,l,d,u,c,v),n.m34=-i(r,a,h,s,f,p,u,c,v),n.m44=i(r,a,h,s,f,p,o,l,d),n}t.exports={determinant2x2:r,determinant3x3:i,determinant4x4:s,isAffine:o,isIdentityOrTranslation:u,adjoint:a}}}}})("XCSSMatrix/index");