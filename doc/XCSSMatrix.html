<!DOCTYPE html>
<html lang="en">
    <head>
        <title>XCSSMatrix | API Docs</title>
        <link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" /><link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.css" />
        <style>
          .doc p {line-height: 21px; font-size: 16px}
          h2 .icon { margin-top: 7px !important;}
          h3 .icon { margin-top: 4px !important;}
          li {line-height: 21px;}
          .navbar .container { width: 940px; }
          .sidenav i {
            float: right;
            margin-top: 2px;
            margin-right: -6px;
          }
          .sidenav > li.nav-header {
            background-color: #eee;
          }
          .sidenav > li.nav-header,
          .sidenav > li > a {
            display: block;
            margin: 0 0 -1px;
            padding: 8px 14px;
            border: 1px solid #e5e5e5;
          }
          .sidenav > li.nav-header:first-child,
          .sidenav > li:first-child > a {
            -webkit-border-radius: 6px 6px 0 0;
            -moz-border-radius: 6px 6px 0 0;
            border-radius: 6px 6px 0 0;
          }
          .sidenav > li:last-child > a {
            -webkit-border-radius: 0 0 6px 6px;
            -moz-border-radius: 0 0 6px 6px;
            border-radius: 0 0 6px 6px;
          }

        </style>
    </head>
    <body>
      <div class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="index.html">API Docs</a>
            <ul class="nav">
              <li class="active"><a href="XCSSMatrix.html">XCSSMatrix</a></li><li><a href="angleUtils.html">angleUtils</a></li><li><a href="cssTransformStringUtils.html">cssTransformStringUtils</a></li><li><a href="matrixUtils.html">matrixUtils</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="row">
          <div class="span3">
            <ul class="nav nav-list sidenav"><li class="nav-header">instance methods</li><li><a href="#instance/multiply"><i class="icon icon-eye-open"></i> multiply</a></li><li><a href="#instance/inverse"><i class="icon icon-eye-open"></i> inverse</a></li><li><a href="#instance/rotate"><i class="icon icon-eye-open"></i> rotate</a></li><li><a href="#instance/rotateAxisAngle"><i class="icon icon-eye-open"></i> rotateAxisAngle</a></li><li><a href="#instance/scale"><i class="icon icon-eye-open"></i> scale</a></li><li><a href="#instance/skewX"><i class="icon icon-eye-open"></i> skewX</a></li><li><a href="#instance/skewY"><i class="icon icon-eye-open"></i> skewY</a></li><li><a href="#instance/translate"><i class="icon icon-eye-open"></i> translate</a></li><li><a href="#instance/setMatrixValue"><i class="icon icon-eye-open"></i> setMatrixValue</a></li><li><a href="#instance/toString"><i class="icon icon-eye-open"></i> toString</a></li><li class="nav-header">helper methods</li><li><a href="#helper/indextoKey2d"><i class="icon icon-eye-close"></i> indextoKey2d</a></li><li><a href="#helper/indextoKey3d"><i class="icon icon-eye-close"></i> indextoKey3d</a></li><li><a href="#helper/objectValues"><i class="icon icon-eye-close"></i> objectValues</a></li><li><a href="#helper/cssFunctionToJsFunction"><i class="icon icon-eye-close"></i> cssFunctionToJsFunction</a></li><li><a href="#helper/parsedToDegrees"><i class="icon icon-eye-close"></i> parsedToDegrees</a></li><li><a href="#helper/transformMatrix"><i class="icon icon-eye-close"></i> transformMatrix</a></li><li><a href="#helper/toMatrixString"><i class="icon icon-eye-close"></i> toMatrixString</a></li></ul>
            &nbsp;
          </div>
          <div class="span9">
            <div class="hero-unit"><h1>XCSSMatrix</h1><div class="doc"><p>Given a CSS transform string (like <code>rotate(3rad)</code>, or<br />   <code>matrix(1, 0, 0, 0, 1, 0)</code>), return an instance compatible with<br />   <a href="http://developer.apple.com/library/safari/documentation/AudioVideo/Reference/WebKitCSSMatrixClassReference/WebKitCSSMatrix/WebKitCSSMatrix.html"><code>WebKitCSSMatrix</code></a><br /> @constructor<br /> @param <strong>string</strong> domstr - a string representation of a 2D or 3D transform matrix<br />   in the form given by the CSS transform property, i.e. just like the<br />   output from [[@link#toString]].<br /> @member <strong>number</strong> a - The first 2D vector value.<br /> @member <strong>number</strong> b - The second 2D vector value.<br /> @member <strong>number</strong> c - The third 2D vector value.<br /> @member <strong>number</strong> d - The fourth 2D vector value.<br /> @member <strong>number</strong> e - The fifth 2D vector value.<br /> @member <strong>number</strong> f - The sixth 2D vector value.<br /> @member <strong>number</strong> m11 - The 3D matrix value in the first row and first column.<br /> @member <strong>number</strong> m12 - The 3D matrix value in the first row and second column.<br /> @member <strong>number</strong> m13 - The 3D matrix value in the first row and third column.<br /> @member <strong>number</strong> m14 - The 3D matrix value in the first row and fourth column.<br /> @member <strong>number</strong> m21 - The 3D matrix value in the second row and first column.<br /> @member <strong>number</strong> m22 - The 3D matrix value in the second row and second column.<br /> @member <strong>number</strong> m23 - The 3D matrix value in the second row and third column.<br /> @member <strong>number</strong> m24 - The 3D matrix value in the second row and fourth column.<br /> @member <strong>number</strong> m31 - The 3D matrix value in the third row and first column.<br /> @member <strong>number</strong> m32 - The 3D matrix value in the third row and second column.<br /> @member <strong>number</strong> m33 - The 3D matrix value in the third row and third column.<br /> @member <strong>number</strong> m34 - The 3D matrix value in the third row and fourth column.<br /> @member <strong>number</strong> m41 - The 3D matrix value in the fourth row and first column.<br /> @member <strong>number</strong> m42 - The 3D matrix value in the fourth row and second column.<br /> @member <strong>number</strong> m43 - The 3D matrix value in the fourth row and third column.<br /> @member <strong>number</strong> m44 - The 3D matrix value in the fourth row and fourth column.<br /> @returns <strong>XCSSMatrix</strong> matrix</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:52" style="display: none; margin-top: 15px;"><code>function XCSSMatrix(domstr) {
    this.m11 = this.m22 = this.m33 = this.m44 = 1;

               this.m12 = this.m13 = this.m14 =
    this.m21 =            this.m23 = this.m24 =
    this.m31 = this.m32 =            this.m34 =
    this.m41 = this.m42 = this.m43            = 0;

    if (typeof domstr === 'string') {
        this.setMatrixValue(domstr);
    }
}
</code></pre></div><hr/><a href="#instance" class="btn btn-info btn-large">Instance methods</a> <a href="#helper" class="btn btn-inverse btn-large">Helper methods</a> </div><a name="instance"></a><div class="page-header"><h2>XCSSMatrix - instance methods</h2></div><ul class="nav nav-pills"><li><a href="#instance/multiply">multiply</a></li><li><a href="#instance/inverse">inverse</a></li><li><a href="#instance/rotate">rotate</a></li><li><a href="#instance/rotateAxisAngle">rotateAxisAngle</a></li><li><a href="#instance/scale">scale</a></li><li><a href="#instance/skewX">skewX</a></li><li><a href="#instance/skewY">skewY</a></li><li><a href="#instance/translate">translate</a></li><li><a href="#instance/setMatrixValue">setMatrixValue</a></li><li><a href="#instance/toString">toString</a></li></ul><div class="method"><a name="instance/multiply"></a><h2><i class="icon icon-eye-open"></i> <span style="color: grey">XCSSMatrix.</span><span style="color: green">prototype</span>.multiply</h2><blockquote>Declared as <code>function (otherMatrix) </code></blockquote><div class="doc"><p>Multiply one matrix by another<br /> @method<br /> @member<br /> @param <strong>XCSSMatrix</strong> otherMatrix - The matrix to multiply this one by.</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:108" style="display: none; margin-top: 15px;"><code>function (otherMatrix) {
    if (!otherMatrix) return null;

    var a = otherMatrix,
        b = this,
        c = new XCSSMatrix();

    c.m11 = a.m11 * b.m11 + a.m12 * b.m21 + a.m13 * b.m31 + a.m14 * b.m41;
    c.m12 = a.m11 * b.m12 + a.m12 * b.m22 + a.m13 * b.m32 + a.m14 * b.m42;
    c.m13 = a.m11 * b.m13 + a.m12 * b.m23 + a.m13 * b.m33 + a.m14 * b.m43;
    c.m14 = a.m11 * b.m14 + a.m12 * b.m24 + a.m13 * b.m34 + a.m14 * b.m44;

    c.m21 = a.m21 * b.m11 + a.m22 * b.m21 + a.m23 * b.m31 + a.m24 * b.m41;
    c.m22 = a.m21 * b.m12 + a.m22 * b.m22 + a.m23 * b.m32 + a.m24 * b.m42;
    c.m23 = a.m21 * b.m13 + a.m22 * b.m23 + a.m23 * b.m33 + a.m24 * b.m43;
    c.m24 = a.m21 * b.m14 + a.m22 * b.m24 + a.m23 * b.m34 + a.m24 * b.m44;

    c.m31 = a.m31 * b.m11 + a.m32 * b.m21 + a.m33 * b.m31 + a.m34 * b.m41;
    c.m32 = a.m31 * b.m12 + a.m32 * b.m22 + a.m33 * b.m32 + a.m34 * b.m42;
    c.m33 = a.m31 * b.m13 + a.m32 * b.m23 + a.m33 * b.m33 + a.m34 * b.m43;
    c.m34 = a.m31 * b.m14 + a.m32 * b.m24 + a.m33 * b.m34 + a.m34 * b.m44;

    c.m41 = a.m41 * b.m11 + a.m42 * b.m21 + a.m43 * b.m31 + a.m44 * b.m41;
    c.m42 = a.m41 * b.m12 + a.m42 * b.m22 + a.m43 * b.m32 + a.m44 * b.m42;
    c.m43 = a.m41 * b.m13 + a.m42 * b.m23 + a.m43 * b.m33 + a.m44 * b.m43;
    c.m44 = a.m41 * b.m14 + a.m42 * b.m24 + a.m43 * b.m34 + a.m44 * b.m44;

    return c;
};
</code></pre></div><hr/></div><div class="method"><a name="instance/inverse"></a><h2><i class="icon icon-eye-open"></i> <span style="color: grey">XCSSMatrix.</span><span style="color: green">prototype</span>.inverse</h2><blockquote>Declared as <code>function () </code></blockquote><div class="doc"><p>If the matrix is invertible, returns its inverse, otherwise returns null.<br /> @method<br /> @member<br /> @returns {XCSSMatrix|null}</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:93" style="display: none; margin-top: 15px;"><code>function () {
    var inv;

    if (utils.matrix.isIdentityOrTranslation(this)) {
        inv = new XCSSMatrix();

        if (!(this.m41 === 0 && this.m42 === 0 && this.m43 === 0)) {
            inv.m41 = -this.m41;
            inv.m42 = -this.m42;
            inv.m43 = -this.m43;
        }

        return inv;
    }

    // Calculate the adjoint matrix
    var result = utils.matrix.adjoint(this);

    // Calculate the 4x4 determinant
    var det = utils.matrix.determinant4x4(this);

    // If the determinant is zero, then the inverse matrix is not unique
    if (Math.abs(det) &lt; 1e-8) return null;

    // Scale the adjoint matrix to get the inverse
    for (var i = 1; i &lt; 5; i++) {
        for (var j = 1; j &lt; 5; j++) {
            result[('m' + i) + j] /= det;
        }
    }

    return result;
};
</code></pre></div><hr/></div><div class="method"><a name="instance/rotate"></a><h2><i class="icon icon-eye-open"></i> <span style="color: grey">XCSSMatrix.</span><span style="color: green">prototype</span>.rotate</h2><blockquote>Declared as <code>function (rx, ry, rz) </code></blockquote><div class="doc"><p>Returns the result of rotating the matrix by a given vector.</p>

<p>If only the first argument is provided, the matrix is only rotated about<br /> the z axis.<br /> @method<br /> @member<br /> @param <strong>number</strong> rotX - The rotation around the x axis.<br /> @param <strong>number</strong> rotY - The rotation around the y axis. If undefined, the x component is used.<br /> @param <strong>number</strong> rotZ - The rotation around the z axis. If undefined, the x component is used.<br /> @returns XCSSMatrix</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:190" style="display: none; margin-top: 15px;"><code>function (rx, ry, rz) {

    if (typeof rx !== 'number' || isNaN(rx)) rx = 0;

    if ((typeof ry !== 'number' || isNaN(ry)) &&
        (typeof rz !== 'number' || isNaN(rz))) {
        rz = rx;
        rx = 0;
        ry = 0;
    }

    if (typeof ry !== 'number' || isNaN(ry)) ry = 0;
    if (typeof rz !== 'number' || isNaN(rz)) rz = 0;

    rx = utils.angles.deg2rad(rx);
    ry = utils.angles.deg2rad(ry);
    rz = utils.angles.deg2rad(rz);

    var tx = new XCSSMatrix(),
        ty = new XCSSMatrix(),
        tz = new XCSSMatrix(),
        sinA, cosA, sinA2;

    rz /= 2;
    sinA  = Math.sin(rz);
    cosA  = Math.cos(rz);
    sinA2 = sinA * sinA;

    // Matrices are identity outside the assigned values
    tz.m11 = tz.m22 = 1 - 2 * sinA2;
    tz.m12 = tz.m21 = 2 * sinA * cosA;
    tz.m21 *= -1;

    ry /= 2;
    sinA  = Math.sin(ry);
    cosA  = Math.cos(ry);
    sinA2 = sinA * sinA;

    ty.m11 = ty.m33 = 1 - 2 * sinA2;
    ty.m13 = ty.m31 = 2 * sinA * cosA;
    ty.m13 *= -1;

    rx /= 2;
    sinA = Math.sin(rx);
    cosA = Math.cos(rx);
    sinA2 = sinA * sinA;

    tx.m22 = tx.m33 = 1 - 2 * sinA2;
    tx.m23 = tx.m32 = 2 * sinA * cosA;
    tx.m32 *= -1;

    var identityMatrix = new XCSSMatrix(); // returns identity matrix by default
    var isIdentity     = this.toString() === identityMatrix.toString();
    var rotatedMatrix  = isIdentity ?
            tz.multiply(ty).multiply(tx) :
            this.multiply(tx).multiply(ty).multiply(tz);

    return rotatedMatrix;
};
</code></pre></div><hr/></div><div class="method"><a name="instance/rotateAxisAngle"></a><h2><i class="icon icon-eye-open"></i> <span style="color: grey">XCSSMatrix.</span><span style="color: green">prototype</span>.rotateAxisAngle</h2><blockquote>Declared as <code>function (x, y, z, a) </code></blockquote><div class="doc"><p>Returns the result of rotating the matrix around a given vector by a given<br /> angle.</p>

<p>If the given vector is the origin vector then the matrix is rotated by the<br /> given angle around the z axis.<br /> @method<br /> @member<br /> @param <strong>number</strong> rotX - The rotation around the x axis.<br /> @param <strong>number</strong> rotY - The rotation around the y axis. If undefined, the x component is used.<br /> @param <strong>number</strong> rotZ - The rotation around the z axis. If undefined, the x component is used.<br /> @param <strong>number</strong> angle - The angle of rotation about the axis vector, in degrees.<br /> @returns XCSSMatrix</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:264" style="display: none; margin-top: 15px;"><code>function (x, y, z, a) {
    if (typeof x !== 'number' || isNaN(x)) x = 0;
    if (typeof y !== 'number' || isNaN(y)) y = 0;
    if (typeof z !== 'number' || isNaN(z)) z = 0;
    if (typeof a !== 'number' || isNaN(a)) a = 0;
    if (x === 0 && y === 0 && z === 0) z = 1;

    var t   = new XCSSMatrix(),
        len = Math.sqrt(x * x + y * y + z * z),
        cosA, sinA, sinA2, csA, x2, y2, z2;

    a     = (utils.angles.deg2rad(a) || 0) / 2;
    cosA  = Math.cos(a);
    sinA  = Math.sin(a);
    sinA2 = sinA * sinA;

    // Bad vector, use something sensible
    if (len === 0) {
        x = 0;
        y = 0;
        z = 1;
    } else if (len !== 1) {
        x /= len;
        y /= len;
        z /= len;
    }

    // Optimise cases where axis is along major axis
    if (x === 1 && y === 0 && z === 0) {
        t.m22 = t.m33 = 1 - 2 * sinA2;
        t.m23 = t.m32 = 2 * cosA * sinA;
        t.m32 *= -1;
    } else if (x === 0 && y === 1 && z === 0) {
        t.m11 = t.m33 = 1 - 2 * sinA2;
        t.m13 = t.m31 = 2 * cosA * sinA;
        t.m13 *= -1;
    } else if (x === 0 && y === 0 && z === 1) {
        t.m11 = t.m22 = 1 - 2 * sinA2;
        t.m12 = t.m21 = 2 * cosA * sinA;
        t.m21 *= -1;
    } else {
        csA = sinA * cosA;
        x2  = x * x;
        y2  = y * y;
        z2  = z * z;

        t.m11 = 1 - 2 * (y2 + z2) * sinA2;
        t.m12 = 2 * (x * y * sinA2 + z * csA);
        t.m13 = 2 * (x * z * sinA2 - y * csA);
        t.m21 = 2 * (y * x * sinA2 - z * csA);
        t.m22 = 1 - 2 * (z2 + x2) * sinA2;
        t.m23 = 2 * (y * z * sinA2 + x * csA);
        t.m31 = 2 * (z * x * sinA2 + y * csA);
        t.m32 = 2 * (z * y * sinA2 - x * csA);
        t.m33 = 1 - 2 * (x2 + y2) * sinA2;
    }

    return this.multiply(t);
};
</code></pre></div><hr/></div><div class="method"><a name="instance/scale"></a><h2><i class="icon icon-eye-open"></i> <span style="color: grey">XCSSMatrix.</span><span style="color: green">prototype</span>.scale</h2><blockquote>Declared as <code>function (scaleX, scaleY, scaleZ) </code></blockquote><div class="doc"><p>Returns the result of scaling the matrix by a given vector.<br /> @method<br /> @member<br /> @param <strong>number</strong> scaleX - the scaling factor in the x axis.<br /> @param <strong>number</strong> scaleY - the scaling factor in the y axis. If undefined, the x component is used.<br /> @param <strong>number</strong> scaleZ - the scaling factor in the z axis. If undefined, 1 is used.<br /> @returns XCSSMatrix</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:333" style="display: none; margin-top: 15px;"><code>function (scaleX, scaleY, scaleZ) {
    var transform = new XCSSMatrix();

    if (typeof scaleX !== 'number' || isNaN(scaleX)) scaleX = 1;
    if (typeof scaleY !== 'number' || isNaN(scaleY)) scaleY = scaleX;
    if (typeof scaleZ !== 'number' || isNaN(scaleZ)) scaleZ = 1;

    transform.m11 = scaleX;
    transform.m22 = scaleY;
    transform.m33 = scaleZ;

    return this.multiply(transform);
};
</code></pre></div><hr/></div><div class="method"><a name="instance/skewX"></a><h2><i class="icon icon-eye-open"></i> <span style="color: grey">XCSSMatrix.</span><span style="color: green">prototype</span>.skewX</h2><blockquote>Declared as <code>function (degrees) </code></blockquote><div class="doc"><p>Returns the result of skewing the matrix by a given vector.<br /> @method<br /> @member<br /> @param <strong>number</strong> skewX - The scaling factor in the x axis.<br /> @returns XCSSMatrix</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:354" style="display: none; margin-top: 15px;"><code>function (degrees) {
    var radians   = utils.angles.deg2rad(degrees);
    var transform = new XCSSMatrix();

    transform.c = Math.tan(radians);

    return this.multiply(transform);
};
</code></pre></div><hr/></div><div class="method"><a name="instance/skewY"></a><h2><i class="icon icon-eye-open"></i> <span style="color: grey">XCSSMatrix.</span><span style="color: green">prototype</span>.skewY</h2><blockquote>Declared as <code>function (degrees) </code></blockquote><div class="doc"><p>Returns the result of skewing the matrix by a given vector.<br /> @method<br /> @member<br /> @param <strong>number</strong> skewY - the scaling factor in the x axis.<br /> @returns XCSSMatrix</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:354" style="display: none; margin-top: 15px;"><code>function (degrees) {
    var radians   = utils.angles.deg2rad(degrees);
    var transform = new XCSSMatrix();

    transform.b = Math.tan(radians);

    return this.multiply(transform);
};
</code></pre></div><hr/></div><div class="method"><a name="instance/translate"></a><h2><i class="icon icon-eye-open"></i> <span style="color: grey">XCSSMatrix.</span><span style="color: green">prototype</span>.translate</h2><blockquote>Declared as <code>function (x, y, z) </code></blockquote><div class="doc"><p>Returns the result of translating the matrix by a given vector.<br /> @method<br /> @member<br /> @param <strong>number</strong> x - The x component of the vector.<br /> @param <strong>number</strong> y - The y component of the vector.<br /> @param <strong>number</strong> z - The z component of the vector. If undefined, 0 is used.<br /> @returns XCSSMatrix</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:388" style="display: none; margin-top: 15px;"><code>function (x, y, z) {
    var t = new XCSSMatrix();

    if (typeof x !== 'number' || isNaN(x)) x = 0;
    if (typeof y !== 'number' || isNaN(y)) y = 0;
    if (typeof z !== 'number' || isNaN(z)) z = 0;

    t.m41 = x;
    t.m42 = y;
    t.m43 = z;

    return this.multiply(t);
};
</code></pre></div><hr/></div><div class="method"><a name="instance/setMatrixValue"></a><h2><i class="icon icon-eye-open"></i> <span style="color: grey">XCSSMatrix.</span><span style="color: green">prototype</span>.setMatrixValue</h2><blockquote>Declared as <code>function (domstr) </code></blockquote><div class="doc"><p>Sets the matrix values using a string representation, such as that produced<br /> by the [[XCSSMatrix#toString]] method.<br /> @method<br /> @member<br /> @params <strong>string</strong> domstr - A string representation of a 2D or 3D transform matrix<br />   in the form given by the CSS transform property, i.e. just like the<br />   output from [[XCSSMatrix#toString]].<br /> @returns undefined</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:412" style="display: none; margin-top: 15px;"><code>function (domstr) {

    var matrixString = toMatrixString(domstr.trim());
    var matrixObject = utils.transp.statementToObject(matrixString);

    if (!matrixObject) return;

    var is3d   = matrixObject.key === utils.transp.matrixFn3d;
    var keygen = is3d ? indextoKey3d : indextoKey2d;
    var values = matrixObject.value;
    var count  = values.length;

    if ((is3d && count !== 16) || !(is3d || count === 6)) return;

    values.forEach(function (obj, i) {
        var key = keygen(i);
        this[key] = obj.value;
    }, this);
};
</code></pre></div><hr/></div><div class="method"><a name="instance/toString"></a><h2><i class="icon icon-eye-open"></i> <span style="color: grey">XCSSMatrix.</span><span style="color: green">prototype</span>.toString</h2><blockquote>Declared as <code>function () </code></blockquote><div class="doc"><p>Returns a string representation of the matrix.<br /> @method<br /> @memberof XCSSMatrix<br /> @returns <strong>string</strong> matrixString - a string like <code>matrix(1.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000)</code></p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:93" style="display: none; margin-top: 15px;"><code>function () {
    var points, prefix;

    if (utils.matrix.isAffine(this)) {
        prefix = utils.transp.matrixFn2d;
        points = points2d;
    } else {
        prefix = utils.transp.matrixFn3d;
        points = points3d;
    }

    return prefix + '(' +
        points.map(function (p) {
            return this[p].toFixed(6);
        }, this) .join(', ') +
        ')';
};
</code></pre></div><hr/></div><a name="helper"></a><div class="page-header"><h2>XCSSMatrix - helper methods</h2></div><ul class="nav nav-pills"><li><a href="#helper/indextoKey2d">indextoKey2d</a></li><li><a href="#helper/indextoKey3d">indextoKey3d</a></li><li><a href="#helper/objectValues">objectValues</a></li><li><a href="#helper/cssFunctionToJsFunction">cssFunctionToJsFunction</a></li><li><a href="#helper/parsedToDegrees">parsedToDegrees</a></li><li><a href="#helper/transformMatrix">transformMatrix</a></li><li><a href="#helper/toMatrixString">toMatrixString</a></li></ul><div class="method"><a name="helper/indextoKey2d"></a><h2><i class="icon icon-eye-close"></i> <span style="color: grey"></span>indextoKey2d</h2><blockquote>Declared as <code>function indextoKey2d (index) </code></blockquote><div class="doc"></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:432" style="display: none; margin-top: 15px;"><code>function indextoKey2d (index) {
    return String.fromCharCode(index + 97); // ASCII char 97 == 'a'
}
</code></pre></div><hr/></div><div class="method"><a name="helper/indextoKey3d"></a><h2><i class="icon icon-eye-close"></i> <span style="color: grey"></span>indextoKey3d</h2><blockquote>Declared as <code>function indextoKey3d (index) </code></blockquote><div class="doc"></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:436" style="display: none; margin-top: 15px;"><code>function indextoKey3d (index) {
    return ('m' + (Math.floor(index / 4) + 1)) + (index % 4 + 1);
}
</code></pre></div><hr/></div><div class="method"><a name="helper/objectValues"></a><h2><i class="icon icon-eye-close"></i> <span style="color: grey"></span>objectValues</h2><blockquote>Declared as <code>function objectValues(obj) </code></blockquote><div class="doc"></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:549" style="display: none; margin-top: 15px;"><code>function objectValues(obj) {
    return obj.value;
}
</code></pre></div><hr/></div><div class="method"><a name="helper/cssFunctionToJsFunction"></a><h2><i class="icon icon-eye-close"></i> <span style="color: grey"></span>cssFunctionToJsFunction</h2><blockquote>Declared as <code>function cssFunctionToJsFunction(cssFunctionName) </code></blockquote><div class="doc"></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:553" style="display: none; margin-top: 15px;"><code>function cssFunctionToJsFunction(cssFunctionName) {
    return jsFunctions[cssFunctionName];
}
</code></pre></div><hr/></div><div class="method"><a name="helper/parsedToDegrees"></a><h2><i class="icon icon-eye-close"></i> <span style="color: grey"></span>parsedToDegrees</h2><blockquote>Declared as <code>function parsedToDegrees(parsed) </code></blockquote><div class="doc"></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:557" style="display: none; margin-top: 15px;"><code>function parsedToDegrees(parsed) {
    if (parsed.units === 'rad') {
        parsed.value = utils.angles.rad2deg(parsed.value);
        parsed.units = 'deg';
    }
    else if (parsed.units === 'grad') {
        parsed.value = utils.angles.grad2deg(parsed.value);
        parsed.units = 'deg';
    }

    return parsed;
}
</code></pre></div><hr/></div><div class="method"><a name="helper/transformMatrix"></a><h2><i class="icon icon-eye-close"></i> <span style="color: grey"></span>transformMatrix</h2><blockquote>Declared as <code>function transformMatrix(matrix, operation) </code></blockquote><div class="doc"></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:570" style="display: none; margin-top: 15px;"><code>function transformMatrix(matrix, operation) {
    // convert to degrees because all CSSMatrix methods expect degrees
    operation.value = operation.value.map(parsedToDegrees);

    var jsFunction = cssFunctionToJsFunction(operation.key);
    var result     = jsFunction(matrix, operation);

    return result || matrix;
}
</code></pre></div><hr/></div><div class="method"><a name="helper/toMatrixString"></a><h2><i class="icon icon-eye-close"></i> <span style="color: grey"></span>toMatrixString</h2><blockquote>Declared as <code>function toMatrixString(transformString) </code></blockquote><div class="doc"><p>Tranforms a <code>el.style.WebkitTransform</code>-style string<br /> (like <code>rotate(18rad) translate3d(50px, 100px, 10px)</code>)<br /> into a <code>getComputedStyle(el)</code>-style matrix string<br /> (like <code>matrix3d(0.660316, -0.750987, 0, 0, 0.750987, 0.660316, 0, 0, 0, 0, 1, 0, 108.114560, 28.482308, 10, 1)</code>)<br /> @private<br /> @method<br /> @param <strong>string</strong> transformString - <code>el.style.WebkitTransform</code>-style string (like <code>rotate(18rad) translate3d(50px, 100px, 10px)</code>)</p></div><div class="source-code"><a class="btn btn-small" onclick="$(this).parent().find('pre').toggle()">Source code</a><pre class="prettyprint linenums:589" style="display: none; margin-top: 15px;"><code>function toMatrixString(transformString) {
    var statements = utils.transp.stringToStatements(transformString);

    if (statements.length === 1 && (/^matrix/).test(transformString)) {
        return transformString;
    }

    // We only want the statement to pass to `utils.transp.statementToObject`
    //   not the other values (index, list) from `map`
    var statementToObject = utils.funcs.onlyFirstArg(utils.transp.statementToObject);
    var operations        = statements.map(statementToObject);
    var startingMatrix    = new XCSSMatrix();
    var transformedMatrix = operations.reduce(transformMatrix, startingMatrix);
    var matrixString      = transformedMatrix.toString();

    return matrixString;
}
</code></pre></div><hr/></div>
          </div>
        </div>
    </body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script><script src="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.js"></script><script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>
    <script>
      window.prettyPrint && prettyPrint()
    </script>
</html>
